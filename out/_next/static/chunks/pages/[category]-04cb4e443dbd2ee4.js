(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{2354:function(t,e,n){"use strict";n.d(e,{b:function(){return p}});var r=n(9499),a=n(7294),c=n(1163),o=n(1664),i=n.n(o),s=n(4184),l=n.n(s),u=n(4938),_=n(7423),d=n.n(_),f=n(5893),p=function(t){var e=t.lastCrumb,n=(0,c.useRouter)().asPath,o=(0,u.a)(n),s=(0,a.useState)([]),_=s[0],p=s[1];return(0,a.useEffect)(function(){var t,n;p((t=o.split("/"),n=[],t.forEach(function(t,r,a){if(0===r)n.push({name:"Главная",path:"/"});else{var c=1!==r?n[r-1].path:"",o=a.length===r+1;n.push({name:o&&e?e:t,path:"".concat(c,"/").concat(t)})}}),n))},[o,e]),(0,f.jsx)("div",{className:d().root,children:(0,f.jsx)("ul",{className:d().list,children:_.map(function(t){return(0,f.jsx)("li",{className:l()(d().list__crumb,(0,r.Z)({},d().list__crumb_active,o===t.path)),children:(0,f.jsx)(i(),{href:t.path,children:t.name})},t.name)})})})}},9786:function(t,e,n){"use strict";n.d(e,{Z:function(){return P}});var r,a,c,o=n(5675),i=n.n(o),s=n(1664),l=n.n(s),u=n(7294),_=n(4938),d=n(1072),f=n(5559),p=n.n(f),h=n(9499),g=n(4184),v=n.n(g);function b(){return(b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var m=function(t){return u.createElement("svg",b({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r||(r=u.createElement("path",{d:"M7.178 9.224c.51 0 .924-.41.924-.917V4.732c0-1.598 1.312-2.899 2.925-2.899 1.612 0 2.924 1.301 2.924 2.9v3.574a.92.92 0 0 0 .925.917c.51 0 .925-.41.925-.917V4.732C15.8 2.123 13.659 0 11.027 0S6.253 2.123 6.253 4.732v3.575c0 .506.414.917.925.917Z",fill:"#595959"})),a||(a=u.createElement("path",{d:"M21.635 7.164h-3.766c-.631 0-1.143.512-1.143 1.143 0 1.011-.83 1.833-1.85 1.833s-1.849-.822-1.849-1.833c0-.631-.512-1.143-1.143-1.143h-1.713c-.631 0-1.143.512-1.143 1.143 0 1.011-.83 1.833-1.85 1.833s-1.85-.822-1.85-1.833c0-.631-.51-1.143-1.142-1.143H.366c-.256 0-.414.2-.353.445L3.249 20.67c.195.734.974 1.33 1.74 1.33h12.022c.767 0 1.545-.596 1.741-1.33l3.235-13.06c.06-.247-.097-.446-.352-.446Z",fill:"#595959"})))};function x(){return(x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var j=function(t){return u.createElement("svg",x({width:24,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),c||(c=u.createElement("path",{d:"M17.59 1.41 16.18 0 9.84 6.34l1.41 1.41 6.34-6.34ZM21.83 0 11.25 10.58 7.07 6.41 5.66 7.82l5.59 5.59 12-12L21.83 0ZM0 7.82l5.59 5.59L7 12 1.42 6.41 0 7.82Z",fill:"#fff"})))},N=n(3889),y=n.n(N),w=n(5893),C=function(t){var e=t.inCart,n=t.buttonToggleHandler,r=t.discount,a=t.price;return(0,w.jsxs)("button",{className:v()(y().button,(0,h.Z)({},y().button_cart,e)),onClick:n,children:[e&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:y().button__content,children:(0,w.jsxs)("span",{className:v()(y().button__price,y().button__price_cart),children:[r||a," $"]})}),(0,w.jsx)("div",{className:y().button__icon,children:(0,w.jsx)(j,{alt:"cart-added"})})]}),!e&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:y().button__content,children:[(0,w.jsxs)("span",{className:y().button__price,children:[r||a," $"]}),r&&(0,w.jsxs)("span",{className:y().button__discount,children:[a," $"]})]}),(0,w.jsx)("div",{className:y().button__icon,children:(0,w.jsx)(m,{alt:"cart"})})]})]})},P=function(t){var e=t.info,n=(0,u.useContext)(d.A),r=n.cart,a=n.addToCartHandler,c=n.removeFromCartHandler,o=(0,u.useState)(!1),s=o[0],f=o[1],h=e.id,g=e.brand,v=e.category,b=e.title,m=e.price,x=e.discountPercentage,j=e.images,N=(0,_.N)(m,x);return(0,u.useEffect)(function(){f(r.some(function(t){return t.id===h}))},[r,h]),(0,w.jsxs)(l(),{href:"/".concat(v,"/").concat(h),className:p().root,children:[(0,w.jsx)("div",{className:p().image,children:(0,w.jsx)(i(),{src:j[0],alt:b,fill:!0,sizes:"285px",priority:!0,style:{objectFit:"contain"}})}),(0,w.jsx)("span",{className:p().brand,children:g}),(0,w.jsx)("span",{className:p().category,children:v}),(0,w.jsx)("span",{className:p().title,children:b}),(0,w.jsx)(C,{inCart:s,buttonToggleHandler:function(t){t.preventDefault(),s?(c(h),f(!1)):(a({id:h,count:1,price:N||m}),f(!0))},discount:N,price:m})]})}},5869:function(t,e,n){"use strict";n.d(e,{R:function(){return o}});var r=n(8399),a=n.n(r),c=n(5893),o=function(t){var e=t.heading;return(0,c.jsx)("div",{className:a().root,children:(0,c.jsx)("h1",{className:a().text,children:e})})}},6697:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return U},default:function(){return $}});var r,a=n(4418),c=n.n(a),o=n(7294),i=n(9734),s=n(1534),l=n(9499),u=n(7812),_=n(1163),d=n(1338),f=n.n(d),p=n(5893),h=function(t){var e=t.label,n=t.total,r=t.toggleHandler,a=t.activeValues.includes(e);return(0,p.jsxs)("div",{className:f().root,children:[(0,p.jsx)("input",{id:e,className:f().checkbox,type:"checkbox",checked:a,onChange:function(t){r(t.target.checked,e)}}),(0,p.jsxs)("label",{id:"hint",htmlFor:e,className:f().checkbox__label,children:[e,(0,p.jsxs)("span",{className:f().checkbox__total,children:["(",n,")"]})]})]})},g=n(7186),v=n.n(g);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){(0,l.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var x=function(t){var e,n=t.name,r=t.heading,a=t.values,c=(0,_.useRouter)(),o=c.query,i=c.push,s=o[n],d=null!==(e=null==s?void 0:s.split(", "))&&void 0!==e?e:[],f=function(t,e){if(t){var r=Array.from(new Set([].concat((0,u.Z)(d),[e]))).join(", "),a=m(m({},o),{},(0,l.Z)({},n,r));i({query:m({},a)},void 0,{shallow:!0})}else{var c=d.filter(function(t){return t!==e}),s=m(m({},o),{},(0,l.Z)({},n,c));c.length>0&&(s=m(m({},o),{},(0,l.Z)({},n,c.join(", ")))),i({query:m({},s)},void 0,{shallow:!0})}};return(0,p.jsxs)("div",{className:v().wrapper,children:[(0,p.jsx)("h5",{className:v().heading,children:r}),(0,p.jsx)("div",{className:v().fields,children:null==a?void 0:a.map(function(t,e){var n=t.value,r=t.total;return(0,p.jsx)(h,{label:n,activeValues:d,total:r,toggleHandler:f},"".concat(e).concat(n))})})]})},j=n(1433),N=n.n(j),y=function(t){var e=t.category,n=(0,i.ZP)(s.i.getCategoryProducts({category:e})).data,r=(0,o.useState)([]),a=r[0],c=r[1];return(0,o.useEffect)(function(){var t;c((t=null==n?void 0:n.products.map(function(t){return t.brand}),Array.from(new Set(t))).map(function(t){var e=null==n?void 0:n.products.filter(function(e){return e.brand===t}).length;return{value:t,total:e}}))},[null==n?void 0:n.products]),(0,p.jsxs)("aside",{className:N().wrapper,children:[(0,p.jsx)("h2",{className:N().heading,children:"Фильтр"}),(0,p.jsx)("div",{className:N().content,children:[{id:1,name:"brand",heading:"Брэнд",values:a}].map(function(t){var e=t.id,n=t.name,r=t.heading,a=t.values;return(0,p.jsx)(x,{name:n,heading:r,values:a},e)})})]})},w=n(4184),C=n.n(w),P=n(5941),O=n.n(P),S=function(t){var e=t.productsTotal,n=t.productsOnPage,r=t.changePageNandler,a=(0,o.useState)(1),c=a[0],i=a[1],s=e?Math.ceil(e/n):1,u=Array.from(Array(s).keys()),_=function(t){i(t),r(t-1)};return(0,p.jsxs)("div",{className:O().root,children:[(0,p.jsx)("button",{className:O().button,onClick:function(){i(function(t){return t-1}),r(c-2)},disabled:1===c,children:"<"}),(0,p.jsx)("ul",{className:O().list,children:u.map(function(t){var e=t+1;return(0,p.jsx)("li",{className:C()(O().list__page,(0,l.Z)({},O().list__page_active,c===e)),onClick:function(){return _(e)},children:e},t)})}),(0,p.jsx)("button",{className:O().button,onClick:function(){i(function(t){return t+1}),r(c)},disabled:c===s,children:">"})]})},k=n(2354),E=n(1182),L=n.n(E),Z=function(t){var e=t.sortList,n=t.changeActiveSortHandler;return(0,p.jsx)("div",{className:L().root,children:(0,p.jsx)("ul",{className:L().list,children:e.map(function(t,e){var r=t.name,a=t.type;return(0,p.jsx)("li",{className:L().list__item,onClick:function(){return n({name:r,type:a})},children:r},"".concat(e).concat(r))})})})},B=n(518),D=n.n(B),R=function(t){var e=t.sortList,n=t.activeSort,r=t.setActiveSort,a=n.name,c=(0,o.useState)(!1),i=c[0],s=c[1],l=(0,o.useRef)(null);return(0,o.useEffect)(function(){var t=function(t){var e;null!==(e=l.current)&&void 0!==e&&e.contains(t.target)||s(!1)};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}},[]),(0,p.jsxs)("div",{className:D().root,children:[(0,p.jsx)("h4",{className:D().heading,children:"Сортировать"}),(0,p.jsxs)("div",{className:D().select,ref:l,children:[(0,p.jsx)("button",{className:C()(D().select__button,i&&D().select__button_active),onClick:function(){return s(function(t){return!t})},children:a}),i&&(0,p.jsx)(Z,{sortList:e,changeActiveSortHandler:function(t){r(t),s(!1)}})]})]})},q=n(5359),H=n.n(q);function T(){return(T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var V=function(t){return o.createElement("svg",T({viewBox:"0 0 61 61",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r||(r=o.createElement("path",{fill:"#fe73a4",d:"M40.927 52.537c-7.514 3.495-16.634 3-23.91-2.096C6.159 42.84 3.52 27.874 11.123 17.017 18.725 6.158 33.69 3.52 44.548 11.122c7.276 5.095 10.861 13.496 10.147 21.752l5.978.523c.893-10.32-3.588-20.821-12.683-27.19C34.417-3.296 15.71.002 6.208 13.575-3.296 27.147.003 45.853 13.575 55.356c9.095 6.369 20.496 6.988 29.888 2.62l-2.536-5.44Z"})))},A=n(6948),F=n.n(A),M=function(){return(0,p.jsx)("div",{className:F().root,children:(0,p.jsx)(V,{alt:"loader"})})},X=n(9786),Y=function(t){var e=t.products,n=t.isLoading;return(0,p.jsxs)("div",{className:H().grid,children:[null==e?void 0:e.map(function(t){return(0,p.jsx)(X.Z,{info:t},t.id)}),n&&(0,p.jsx)("div",{className:H().grid__loader,children:(0,p.jsx)(M,{})})]})},z=n(9129),K=n.n(z),I=[{name:"По умолчанию",type:"default"},{name:"По возрастанию цены",type:"increase_price"},{name:"По убыванию цены",type:"decrease_price"}],Q=I[0],W=function(t){var e=t.data,n=t.category,r=(0,o.useState)(0),a=r[0],c=r[1],l=(0,i.ZP)(s.i.getCategoryProducts({category:n,limit:"".concat(12),skip:"".concat(a)}),{fallbackData:e}),d=l.data,f=l.isLoading,h=(0,o.useState)(null==d?void 0:d.products),g=h[0],v=h[1],b=(0,o.useState)(g),m=b[0],x=b[1],j=(0,o.useState)(Q),N=j[0],y=j[1],w=(0,_.useRouter)().query;return(0,o.useEffect)(function(){var t,e,n;v((e=null==(t=w.brand)?void 0:t.split(", "),n=[],e?(e.forEach(function(t){null==d||d.products.forEach(function(e){t===e.brand&&n.push(e)})}),n):null==d?void 0:d.products))},[null==d?void 0:d.products,w]),(0,o.useEffect)(function(){x(function(){if(g){var t=(0,u.Z)(g);switch(N.type){case"increase_price":return t.sort(function(t,e){return+t.price-+e.price});case"decrease_price":return t.sort(function(t,e){return+e.price-+t.price});default:return t}}}())},[N.type,g]),(0,p.jsxs)("article",{className:K().root,children:[(0,p.jsxs)("div",{className:K().heading,children:[(0,p.jsx)("h2",{className:K().heading__text,children:"Товары"}),(0,p.jsx)(R,{sortList:I,activeSort:N,setActiveSort:y})]}),(0,p.jsx)(k.b,{}),(0,p.jsx)(Y,{products:m,isLoading:f}),(0,p.jsx)("div",{className:K().pagination,children:(0,p.jsx)(S,{productsTotal:null==d?void 0:d.total,productsOnPage:12,changePageNandler:function(t){return c(12*t)}})})]})},G=n(5869),J=function(t){var e=t.data,n=t.category;return(0,p.jsxs)("section",{className:c().root,children:[(0,p.jsx)(G.R,{heading:n}),(0,p.jsx)("div",{className:c().content,children:(0,p.jsxs)("div",{className:c().content__wrapper,children:[(0,p.jsx)(y,{category:n}),(0,p.jsx)(W,{data:e,category:n})]})})]})},U=!0,$=function(t){var e=t.data,n=t.category;return(0,p.jsx)(J,{data:e,category:n})}},47:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[category]",function(){return n(6697)}])},7423:function(t){t.exports={root:"BreadCrumbs_root__ObtSq",list:"BreadCrumbs_list__LeW6u",list__crumb:"BreadCrumbs_list__crumb___YWkj",list__crumb_active:"BreadCrumbs_list__crumb_active__LuKQu"}},5559:function(t){t.exports={root:"Card_root__mCXXW",image:"Card_image__TJC4n",brand:"Card_brand__cE2qU",category:"Card_category__YQbmf",title:"Card_title__kCBV6"}},3889:function(t){t.exports={button:"CartButton_button__aQ361",button__content:"CartButton_button__content__I4Lp0",button__price:"CartButton_button__price__u13xt",button__price_cart:"CartButton_button__price_cart___e6Qo",button__discount:"CartButton_button__discount__b9O0B",button__icon:"CartButton_button__icon__YEq0c",button_cart:"CartButton_button_cart__EeITR"}},1338:function(t){t.exports={checkbox:"Checkbox_checkbox__D_qDG",checkbox__label:"Checkbox_checkbox__label__13QDU",checkbox__total:"Checkbox_checkbox__total__eVXdR"}},6948:function(t){t.exports={root:"Loader_root__bKVzZ",loader:"Loader_loader__G2jw8"}},5941:function(t){t.exports={root:"Pagination_root__eq1cr",list:"Pagination_list__lE98a",list__page:"Pagination_list__page__9Vvup",list__page_active:"Pagination_list__page_active__8T_Sa",button:"Pagination_button__8T_2F"}},8399:function(t){t.exports={root:"SectionHead_root__LONVM",text:"SectionHead_text__IqfLG"}},4418:function(t){t.exports={root:"Category_root__25idK",content:"Category_content__Y3M1l",content__wrapper:"Category_content__wrapper__gxa8t"}},1433:function(t){t.exports={wrapper:"Filter_wrapper__cbDIf",heading:"Filter_heading__Zb_pc",content:"Filter_content__iCo1W"}},7186:function(t){t.exports={wrapper:"Section_wrapper__zYY0X",heading:"Section_heading__RvXKc",fields:"Section_fields__WDixq"}},9129:function(t){t.exports={root:"Products_root__RcV7b",heading:"Products_heading__Tn6aP",heading__text:"Products_heading__text__2RLzq",grid:"Products_grid__oJ67p",grid__loader:"Products_grid__loader__VRBsy",pagination:"Products_pagination__ZLszm"}},5359:function(t){t.exports={grid:"List_grid__B3DLK",grid__loader:"List_grid__loader__cCPUw"}},518:function(t){t.exports={root:"Sorting_root__V8YR5",heading:"Sorting_heading__6LHKk",select:"Sorting_select__xSzB2",select__button:"Sorting_select__button__DIRcG",select__button_active:"Sorting_select__button_active___veJ2"}},1182:function(t){t.exports={root:"Dropdown_root__gmjc0",list:"Dropdown_list__N51xE",list__item:"Dropdown_list__item__vRPPb"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=47)}),_N_E=t.O()}]);